#include "iom128v.h"
#include "macros.h"

void delay(int ms)
{
 int c1, c2;
 for(c1=0;c1<ms;c1++)
  for(c2=0;c2<970;c2++) NOP();
}

void main()
{
 char seg[6]={0b00010000, 0b00100000, 0b01000000, 0b00000010, 0b00000100, 0b00000001};
 char i;
 DDRC=0b10000111;    // управление дешифратором шины данных
 DDRA=0xFF;		   // шина данных
 DDRG=0x01;		   // разрешение работы дешифратора
 PORTG=0;	 	   // установка на выходе PG0 лог. 0
 PORTA=0;		   // выключить свечение матричного индикатора
 PORTC=0;		   // выбираем столбцы
 PORTC=5;		   // выбираем строки
 while(1)
 {
  for(i=0;i<6;i++)
  {
   PORTC=6;
   PORTA=~seg[i];  //вывод в порт элементов массива (с инверсией)
   PORTC=7;
   PORTA=~seg[i];  //вывод в порт элементов массива (с инверсией)
   PORTC=1;
   PORTA=~seg[i];  //вывод в порт элементов массива (с инверсией)
   PORTC=2;
   PORTA=~seg[i];  //вывод в порт элементов массива (с инверсией)
   delay(100);     // формирование временной задержки
  }
 }
}
